module.exports={8673:a=>{"use strict";a.s({Dialog:()=>h,DialogContent:()=>l,DialogDescription:()=>o,DialogHeader:()=>m,DialogTitle:()=>n,DialogTrigger:()=>i});var b=a.i(20518),c=a.i(8801),d=a.i(56902);a.i(47495);var e=a.i(87027);a.i(51774);var f=a.i(40486),g=a.i(99180);let h=d.Root,i=d.Trigger,j=d.Portal;d.Close;let k=(0,c.forwardRef)(({className:a,...c},e)=>(0,b.jsx)(d.Overlay,{ref:e,className:(0,f.cn)("fixed inset-0 z-50 bg-black/30 backdrop-blur-sm data-[state=open]:animate-fd-fade-in data-[state=closed]:animate-fd-fade-out",a),...c}));k.displayName=d.Overlay.displayName;let l=(0,c.forwardRef)(({className:a,children:c,...h},i)=>(0,b.jsxs)(j,{children:[(0,b.jsx)(k,{}),(0,b.jsxs)(d.Content,{ref:i,className:(0,f.cn)("fixed left-1/2 top-1/2 z-50 flex flex-col gap-4 w-full max-w-lg -translate-x-1/2 -translate-y-1/2 border bg-fd-popover p-4 shadow-lg rounded-xl duration-200 data-[state=open]:animate-fd-dialog-in data-[state=closed]:animate-fd-dialog-out focus-visible:outline-none",a),...h,children:[c,(0,b.jsx)(d.Close,{"aria-label":"Close",className:(0,f.cn)((0,g.buttonVariants)({size:"icon-sm",color:"ghost"}),"absolute end-2 top-2 text-fd-muted-foreground/70"),children:(0,b.jsx)(e.X,{})})]})]}));l.displayName=d.Content.displayName;let m=({className:a,...c})=>(0,b.jsx)("div",{className:(0,f.cn)("flex flex-col gap-1.5 text-center sm:text-start",a),...c});m.displayName="DialogHeader";let n=(0,c.forwardRef)(({className:a,...c},e)=>(0,b.jsx)(d.Title,{ref:e,className:(0,f.cn)("text-lg font-semibold leading-none tracking-tight",a),...c}));n.displayName=d.Title.displayName;let o=(0,c.forwardRef)(({className:a,...c},e)=>(0,b.jsx)(d.Description,{ref:e,className:(0,f.cn)("text-sm text-fd-muted-foreground",a),...c}));o.displayName=d.Description.displayName},87744:a=>{"use strict";a.s({OauthDialog:()=>l,OauthDialogTrigger:()=>m});var b=a.i(20518),c=a.i(8673),d=a.i(11891),e=a.i(71592),f=a.i(38264),g=a.i(8801);a.i(51774);var h=a.i(40486),i=a.i(99180),j=a.i(45210);let k={password:{name:"Resource Owner Password Flow",description:"Authenticate using username and password."},clientCredentials:{name:"Client Credentials",description:"Intended for the server-to-server authentication."},authorizationCode:{name:"Authorization code",description:"Authenticate with 3rd party services"},implicit:{name:"Implicit",description:"Retrieve the access token directly."}};function l({scheme:a,scopes:l,setToken:m,children:n,open:o,setOpen:p}){let[q,r]=(0,g.useState)(()=>Object.keys(a.flows)[0]),s=(0,d.useForm)({defaultValues:{clientId:"",clientSecret:"",username:"",password:""}}),t=(0,f.useQuery)(async(b,c)=>{let d=a.flows.authorizationCode,e=await fetch(d.tokenUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"authorization_code",code:b,redirect_uri:c.redirect_uri,client_id:c.client_id,client_secret:c.client_secret})});if(!e.ok)throw Error(await e.text());let{access_token:f,token_type:g="Bearer"}=await e.json();m(`${g} ${f}`),p(!1)});(0,g.useEffect)(()=>{if(a.flows.authorizationCode){let a=new URLSearchParams(window.location.search),b=a.get("state"),c=a.get("code");if(b&&c){let a=JSON.parse(b);p(!0),s.setValue("clientId",a.client_id),s.setValue("clientSecret",a.client_secret),t.start(c,a),window.history.replaceState(null,"",window.location.pathname);return}}if(a.flows.implicit&&window.location.hash.length>1){let a=new URLSearchParams(window.location.hash.slice(1)),b=a.get("state"),c=a.get("access_token"),d=a.get("token_type")??"Bearer";if(b&&c){let a=JSON.parse(b);s.setValue("clientId",a.client_id),m(`${d} ${c}`),window.history.replaceState(null,"",window.location.pathname)}}},[]);let u=(0,f.useQuery)(async b=>{let c;if("implicit"===q){let c=a.flows[q],d=new URLSearchParams;d.set("response_type","token"),d.set("client_id",b.clientId),d.set("redirect_uri",window.location.href),d.set("scope",l.join("+")),d.set("state",JSON.stringify({client_id:b.clientId,redirect_uri:window.location.href})),window.location.replace(`${c.authorizationUrl}?${d.toString()}`);return}if("authorizationCode"===q){let c=a.flows[q],d=new URLSearchParams;d.set("response_type","code"),d.set("client_id",b.clientId),d.set("redirect_uri",window.location.href),d.set("scope",l.join("+")),d.set("state",JSON.stringify({client_id:b.clientId,client_secret:b.clientSecret,redirect_uri:window.location.href})),window.location.replace(`${c.authorizationUrl}?${d.toString()}`);return}if("password"===q){let d=a.flows[q];c=await fetch(d.tokenUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"password",username:b.username,password:b.password,scope:l.join("+")})})}if("clientCredentials"===q){let d=a.flows[q];c=await fetch(d.tokenUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"client_credentials",client_id:b.clientId,client_secret:b.clientSecret,scope:l.join("+")})})}if(c){if(!c.ok)throw Error(await c.text());let{access_token:a,token_type:b="Bearer"}=await c.json();m(`${b} ${a}`),p(!1)}}),v=s.handleSubmit(a=>u.start(a)),w=u.isLoading||t.isLoading,x=t.error??u.error;return(0,b.jsxs)(c.Dialog,{open:o,onOpenChange:p,children:[n,(0,b.jsxs)(c.DialogContent,{children:[(0,b.jsxs)(c.DialogHeader,{children:[(0,b.jsx)(c.DialogTitle,{children:"Authorization"}),(0,b.jsx)(c.DialogDescription,{children:"Obtain the access token for API."})]}),(0,b.jsxs)("form",{className:"flex flex-col gap-6",onSubmit:a=>{v(a),a.stopPropagation()},children:[(0,b.jsxs)(j.Select,{value:q,onValueChange:r,children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{})}),(0,b.jsx)(j.SelectContent,{children:Object.keys(a.flows).map(a=>{let{name:c,description:d}=k[a];return(0,b.jsxs)(j.SelectItem,{value:a,children:[(0,b.jsx)("p",{className:"font-medium",children:c}),(0,b.jsx)("p",{className:"text-fd-muted-foreground",children:d})]},a)})})]}),("authorizationCode"===q||"clientCredentials"===q||"implicit"===q)&&(0,b.jsxs)("fieldset",{className:"flex flex-col gap-1.5",children:[(0,b.jsx)("label",{htmlFor:"client_id",className:(0,h.cn)((0,e.labelVariants)()),children:"Client ID"}),(0,b.jsx)("p",{className:"text-fd-muted-foreground text-sm",children:"The client ID of your OAuth application."}),(0,b.jsx)(e.Input,{id:"client_id",placeholder:"Enter value",type:"text",autoComplete:"off",disabled:w,...s.register("clientId",{required:!0})})]}),("authorizationCode"===q||"clientCredentials"===q)&&(0,b.jsxs)("fieldset",{className:"flex flex-col gap-1.5",children:[(0,b.jsx)("label",{htmlFor:"client_secret",className:(0,h.cn)((0,e.labelVariants)()),children:"Client Secret"}),(0,b.jsx)("p",{className:"text-fd-muted-foreground text-sm",children:"The client secret of your OAuth application."}),(0,b.jsx)(e.Input,{id:"client_secret",placeholder:"Enter value",type:"password",autoComplete:"off",disabled:w,...s.register("clientSecret",{required:!0})})]}),"password"===q&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("fieldset",{className:"flex flex-col gap-1.5",children:[(0,b.jsx)("label",{htmlFor:"username",className:(0,h.cn)((0,e.labelVariants)()),children:"Username"}),(0,b.jsx)(e.Input,{id:"username",placeholder:"Enter value",type:"text",disabled:w,autoComplete:"off",...s.register("username",{required:!0})})]}),(0,b.jsxs)("fieldset",{className:"flex flex-col gap-1.5",children:[(0,b.jsx)("label",{htmlFor:"password",className:(0,h.cn)((0,e.labelVariants)()),children:"Client Secret"}),(0,b.jsx)(e.Input,{id:"password",placeholder:"Enter value",type:"password",autoComplete:"off",disabled:w,...s.register("password",{required:!0})})]})]}),x?(0,b.jsx)("p",{className:"text-red-400 font-medium text-sm",children:String(x)}):null,(0,b.jsx)("button",{type:"submit",disabled:w,className:(0,h.cn)((0,i.buttonVariants)({color:"primary"})),children:t.isLoading?"Fetching token...":"Submit"})]})]})]})}let m=c.DialogTrigger}};

//# sourceMappingURL=53381_fumadocs-openapi_dist_5643ee7a._.js.map