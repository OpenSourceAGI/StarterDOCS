(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{65595:e=>{"use strict";e.s({Dialog:()=>n,DialogContent:()=>p,DialogDescription:()=>m,DialogHeader:()=>u,DialogTitle:()=>f,DialogTrigger:()=>o});var t=e.i(47352),i=e.i(2394),a=e.i(32533);e.i(20870);var l=e.i(48458);e.i(18673);var r=e.i(91616),s=e.i(47834);let n=a.Root,o=a.Trigger,c=a.Portal;a.Close;let d=(0,i.forwardRef)(({className:e,...i},l)=>(0,t.jsx)(a.Overlay,{ref:l,className:(0,r.cn)("fixed inset-0 z-50 bg-black/30 backdrop-blur-sm data-[state=open]:animate-fd-fade-in data-[state=closed]:animate-fd-fade-out",e),...i}));d.displayName=a.Overlay.displayName;let p=(0,i.forwardRef)(({className:e,children:i,...n},o)=>(0,t.jsxs)(c,{children:[(0,t.jsx)(d,{}),(0,t.jsxs)(a.Content,{ref:o,className:(0,r.cn)("fixed left-1/2 top-1/2 z-50 flex flex-col gap-4 w-full max-w-lg -translate-x-1/2 -translate-y-1/2 border bg-fd-popover p-4 shadow-lg rounded-xl duration-200 data-[state=open]:animate-fd-dialog-in data-[state=closed]:animate-fd-dialog-out focus-visible:outline-none",e),...n,children:[i,(0,t.jsx)(a.Close,{"aria-label":"Close",className:(0,r.cn)((0,s.buttonVariants)({size:"icon-sm",color:"ghost"}),"absolute end-2 top-2 text-fd-muted-foreground/70"),children:(0,t.jsx)(l.X,{})})]})]}));p.displayName=a.Content.displayName;let u=({className:e,...i})=>(0,t.jsx)("div",{className:(0,r.cn)("flex flex-col gap-1.5 text-center sm:text-start",e),...i});u.displayName="DialogHeader";let f=(0,i.forwardRef)(({className:e,...i},l)=>(0,t.jsx)(a.Title,{ref:l,className:(0,r.cn)("text-lg font-semibold leading-none tracking-tight",e),...i}));f.displayName=a.Title.displayName;let m=(0,i.forwardRef)(({className:e,...i},l)=>(0,t.jsx)(a.Description,{ref:l,className:(0,r.cn)("text-sm text-fd-muted-foreground",e),...i}));m.displayName=a.Description.displayName},62375:e=>{"use strict";e.s({OauthDialog:()=>p,OauthDialogTrigger:()=>u});var t=e.i(47352),i=e.i(65595),a=e.i(26759),l=e.i(86342),r=e.i(33728),s=e.i(2394);e.i(18673);var n=e.i(91616),o=e.i(47834),c=e.i(53575);let d={password:{name:"Resource Owner Password Flow",description:"Authenticate using username and password."},clientCredentials:{name:"Client Credentials",description:"Intended for the server-to-server authentication."},authorizationCode:{name:"Authorization code",description:"Authenticate with 3rd party services"},implicit:{name:"Implicit",description:"Retrieve the access token directly."}};function p({scheme:e,scopes:p,setToken:u,children:f,open:m,setOpen:h}){let[w,x]=(0,s.useState)(()=>Object.keys(e.flows)[0]),g=(0,a.useForm)({defaultValues:{clientId:"",clientSecret:"",username:"",password:""}}),j=(0,r.useQuery)(async(t,i)=>{let a=e.flows.authorizationCode,l=await fetch(a.tokenUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"authorization_code",code:t,redirect_uri:i.redirect_uri,client_id:i.client_id,client_secret:i.client_secret})});if(!l.ok)throw Error(await l.text());let{access_token:r,token_type:s="Bearer"}=await l.json();u(`${s} ${r}`),h(!1)});(0,s.useEffect)(()=>{if(e.flows.authorizationCode){let e=new URLSearchParams(window.location.search),t=e.get("state"),i=e.get("code");if(t&&i){let e=JSON.parse(t);h(!0),g.setValue("clientId",e.client_id),g.setValue("clientSecret",e.client_secret),j.start(i,e),window.history.replaceState(null,"",window.location.pathname);return}}if(e.flows.implicit&&window.location.hash.length>1){let e=new URLSearchParams(window.location.hash.slice(1)),t=e.get("state"),i=e.get("access_token"),a=e.get("token_type")??"Bearer";if(t&&i){let e=JSON.parse(t);g.setValue("clientId",e.client_id),u(`${a} ${i}`),window.history.replaceState(null,"",window.location.pathname)}}},[]);let y=(0,r.useQuery)(async t=>{let i;if("implicit"===w){let i=e.flows[w],a=new URLSearchParams;a.set("response_type","token"),a.set("client_id",t.clientId),a.set("redirect_uri",window.location.href),a.set("scope",p.join("+")),a.set("state",JSON.stringify({client_id:t.clientId,redirect_uri:window.location.href})),window.location.replace(`${i.authorizationUrl}?${a.toString()}`);return}if("authorizationCode"===w){let i=e.flows[w],a=new URLSearchParams;a.set("response_type","code"),a.set("client_id",t.clientId),a.set("redirect_uri",window.location.href),a.set("scope",p.join("+")),a.set("state",JSON.stringify({client_id:t.clientId,client_secret:t.clientSecret,redirect_uri:window.location.href})),window.location.replace(`${i.authorizationUrl}?${a.toString()}`);return}if("password"===w){let a=e.flows[w];i=await fetch(a.tokenUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"password",username:t.username,password:t.password,scope:p.join("+")})})}if("clientCredentials"===w){let a=e.flows[w];i=await fetch(a.tokenUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"client_credentials",client_id:t.clientId,client_secret:t.clientSecret,scope:p.join("+")})})}if(i){if(!i.ok)throw Error(await i.text());let{access_token:e,token_type:t="Bearer"}=await i.json();u(`${t} ${e}`),h(!1)}}),b=g.handleSubmit(e=>y.start(e)),S=y.isLoading||j.isLoading,C=j.error??y.error;return(0,t.jsxs)(i.Dialog,{open:m,onOpenChange:h,children:[f,(0,t.jsxs)(i.DialogContent,{children:[(0,t.jsxs)(i.DialogHeader,{children:[(0,t.jsx)(i.DialogTitle,{children:"Authorization"}),(0,t.jsx)(i.DialogDescription,{children:"Obtain the access token for API."})]}),(0,t.jsxs)("form",{className:"flex flex-col gap-6",onSubmit:e=>{b(e),e.stopPropagation()},children:[(0,t.jsxs)(c.Select,{value:w,onValueChange:x,children:[(0,t.jsx)(c.SelectTrigger,{children:(0,t.jsx)(c.SelectValue,{})}),(0,t.jsx)(c.SelectContent,{children:Object.keys(e.flows).map(e=>{let{name:i,description:a}=d[e];return(0,t.jsxs)(c.SelectItem,{value:e,children:[(0,t.jsx)("p",{className:"font-medium",children:i}),(0,t.jsx)("p",{className:"text-fd-muted-foreground",children:a})]},e)})})]}),("authorizationCode"===w||"clientCredentials"===w||"implicit"===w)&&(0,t.jsxs)("fieldset",{className:"flex flex-col gap-1.5",children:[(0,t.jsx)("label",{htmlFor:"client_id",className:(0,n.cn)((0,l.labelVariants)()),children:"Client ID"}),(0,t.jsx)("p",{className:"text-fd-muted-foreground text-sm",children:"The client ID of your OAuth application."}),(0,t.jsx)(l.Input,{id:"client_id",placeholder:"Enter value",type:"text",autoComplete:"off",disabled:S,...g.register("clientId",{required:!0})})]}),("authorizationCode"===w||"clientCredentials"===w)&&(0,t.jsxs)("fieldset",{className:"flex flex-col gap-1.5",children:[(0,t.jsx)("label",{htmlFor:"client_secret",className:(0,n.cn)((0,l.labelVariants)()),children:"Client Secret"}),(0,t.jsx)("p",{className:"text-fd-muted-foreground text-sm",children:"The client secret of your OAuth application."}),(0,t.jsx)(l.Input,{id:"client_secret",placeholder:"Enter value",type:"password",autoComplete:"off",disabled:S,...g.register("clientSecret",{required:!0})})]}),"password"===w&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("fieldset",{className:"flex flex-col gap-1.5",children:[(0,t.jsx)("label",{htmlFor:"username",className:(0,n.cn)((0,l.labelVariants)()),children:"Username"}),(0,t.jsx)(l.Input,{id:"username",placeholder:"Enter value",type:"text",disabled:S,autoComplete:"off",...g.register("username",{required:!0})})]}),(0,t.jsxs)("fieldset",{className:"flex flex-col gap-1.5",children:[(0,t.jsx)("label",{htmlFor:"password",className:(0,n.cn)((0,l.labelVariants)()),children:"Client Secret"}),(0,t.jsx)(l.Input,{id:"password",placeholder:"Enter value",type:"password",autoComplete:"off",disabled:S,...g.register("password",{required:!0})})]})]}),C?(0,t.jsx)("p",{className:"text-red-400 font-medium text-sm",children:String(C)}):null,(0,t.jsx)("button",{type:"submit",disabled:S,className:(0,n.cn)((0,o.buttonVariants)({color:"primary"})),children:j.isLoading?"Fetching token...":"Submit"})]})]})]})}let u=i.DialogTrigger}}]);

//# sourceMappingURL=29ea8a31d2cd57a2.js.map