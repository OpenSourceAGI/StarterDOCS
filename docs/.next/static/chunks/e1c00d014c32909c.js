(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,61355,e=>{"use strict";e.s(["Dialog",()=>s,"DialogContent",()=>u,"DialogDescription",()=>m,"DialogHeader",()=>p,"DialogTitle",()=>f,"DialogTrigger",()=>o]);var t=e.i(43476),a=e.i(71645),i=e.i(26999);e.i(37620);var l=e.i(84050);e.i(16374);var r=e.i(74030),n=e.i(13548);let s=i.Root,o=i.Trigger,c=i.Portal;i.Close;let d=a.forwardRef((e,a)=>{let{className:l,...n}=e;return(0,t.jsx)(i.Overlay,{ref:a,className:(0,r.cn)("fixed inset-0 z-50 bg-black/30 backdrop-blur-sm data-[state=open]:animate-fd-fade-in data-[state=closed]:animate-fd-fade-out",l),...n})});d.displayName=i.Overlay.displayName;let u=a.forwardRef((e,a)=>{let{className:s,children:o,...u}=e;return(0,t.jsxs)(c,{children:[(0,t.jsx)(d,{}),(0,t.jsxs)(i.Content,{ref:a,className:(0,r.cn)("fixed left-1/2 top-1/2 z-50 flex flex-col gap-4 w-full max-w-lg -translate-x-1/2 -translate-y-1/2 border bg-fd-popover p-4 shadow-lg rounded-xl duration-200 data-[state=open]:animate-fd-dialog-in data-[state=closed]:animate-fd-dialog-out focus-visible:outline-none",s),...u,children:[o,(0,t.jsx)(i.Close,{"aria-label":"Close",className:(0,r.cn)((0,n.buttonVariants)({size:"icon-sm",color:"ghost"}),"absolute end-2 top-2 text-fd-muted-foreground/70"),children:(0,t.jsx)(l.X,{})})]})]})});u.displayName=i.Content.displayName;let p=e=>{let{className:a,...i}=e;return(0,t.jsx)("div",{className:(0,r.cn)("flex flex-col gap-1.5 text-center sm:text-start",a),...i})};p.displayName="DialogHeader";let f=a.forwardRef((e,a)=>{let{className:l,...n}=e;return(0,t.jsx)(i.Title,{ref:a,className:(0,r.cn)("text-lg font-semibold leading-none tracking-tight",l),...n})});f.displayName=i.Title.displayName;let m=a.forwardRef((e,a)=>{let{className:l,...n}=e;return(0,t.jsx)(i.Description,{ref:a,className:(0,r.cn)("text-sm text-fd-muted-foreground",l),...n})});m.displayName=i.Description.displayName},90083,e=>{"use strict";e.s(["OauthDialog",()=>u,"OauthDialogTrigger",()=>p]);var t=e.i(43476),a=e.i(61355),i=e.i(53145),l=e.i(81279),r=e.i(95565),n=e.i(71645);e.i(16374);var s=e.i(74030),o=e.i(13548),c=e.i(85118);let d={password:{name:"Resource Owner Password Flow",description:"Authenticate using username and password."},clientCredentials:{name:"Client Credentials",description:"Intended for the server-to-server authentication."},authorizationCode:{name:"Authorization code",description:"Authenticate with 3rd party services"},implicit:{name:"Implicit",description:"Retrieve the access token directly."}};function u(e){var u;let{scheme:p,scopes:f,setToken:m,children:h,open:w,setOpen:x}=e,[g,j]=(0,n.useState)(()=>Object.keys(p.flows)[0]),y=(0,i.useForm)({defaultValues:{clientId:"",clientSecret:"",username:"",password:""}}),b=(0,r.useQuery)(async(e,t)=>{let a=p.flows.authorizationCode,i=await fetch(a.tokenUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"authorization_code",code:e,redirect_uri:t.redirect_uri,client_id:t.client_id,client_secret:t.client_secret})});if(!i.ok)throw Error(await i.text());let{access_token:l,token_type:r="Bearer"}=await i.json();m("".concat(r," ").concat(l)),x(!1)});(0,n.useEffect)(()=>{if(p.flows.authorizationCode){let e=new URLSearchParams(window.location.search),t=e.get("state"),a=e.get("code");if(t&&a){let e=JSON.parse(t);x(!0),y.setValue("clientId",e.client_id),y.setValue("clientSecret",e.client_secret),b.start(a,e),window.history.replaceState(null,"",window.location.pathname);return}}if(p.flows.implicit&&window.location.hash.length>1){var e;let t=new URLSearchParams(window.location.hash.slice(1)),a=t.get("state"),i=t.get("access_token"),l=null!=(e=t.get("token_type"))?e:"Bearer";if(a&&i){let e=JSON.parse(a);y.setValue("clientId",e.client_id),m("".concat(l," ").concat(i)),window.history.replaceState(null,"",window.location.pathname)}}},[]);let S=(0,r.useQuery)(async e=>{let t;if("implicit"===g){let t=p.flows[g],a=new URLSearchParams;a.set("response_type","token"),a.set("client_id",e.clientId),a.set("redirect_uri",window.location.href),a.set("scope",f.join("+")),a.set("state",JSON.stringify({client_id:e.clientId,redirect_uri:window.location.href})),window.location.replace("".concat(t.authorizationUrl,"?").concat(a.toString()));return}if("authorizationCode"===g){let t=p.flows[g],a=new URLSearchParams;a.set("response_type","code"),a.set("client_id",e.clientId),a.set("redirect_uri",window.location.href),a.set("scope",f.join("+")),a.set("state",JSON.stringify({client_id:e.clientId,client_secret:e.clientSecret,redirect_uri:window.location.href})),window.location.replace("".concat(t.authorizationUrl,"?").concat(a.toString()));return}if("password"===g){let a=p.flows[g];t=await fetch(a.tokenUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"password",username:e.username,password:e.password,scope:f.join("+")})})}if("clientCredentials"===g){let a=p.flows[g];t=await fetch(a.tokenUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"client_credentials",client_id:e.clientId,client_secret:e.clientSecret,scope:f.join("+")})})}if(t){if(!t.ok)throw Error(await t.text());let{access_token:e,token_type:a="Bearer"}=await t.json();m("".concat(a," ").concat(e)),x(!1)}}),C=y.handleSubmit(e=>S.start(e)),N=S.isLoading||b.isLoading,_=null!=(u=b.error)?u:S.error;return(0,t.jsxs)(a.Dialog,{open:w,onOpenChange:x,children:[h,(0,t.jsxs)(a.DialogContent,{children:[(0,t.jsxs)(a.DialogHeader,{children:[(0,t.jsx)(a.DialogTitle,{children:"Authorization"}),(0,t.jsx)(a.DialogDescription,{children:"Obtain the access token for API."})]}),(0,t.jsxs)("form",{className:"flex flex-col gap-6",onSubmit:e=>{C(e),e.stopPropagation()},children:[(0,t.jsxs)(c.Select,{value:g,onValueChange:j,children:[(0,t.jsx)(c.SelectTrigger,{children:(0,t.jsx)(c.SelectValue,{})}),(0,t.jsx)(c.SelectContent,{children:Object.keys(p.flows).map(e=>{let{name:a,description:i}=d[e];return(0,t.jsxs)(c.SelectItem,{value:e,children:[(0,t.jsx)("p",{className:"font-medium",children:a}),(0,t.jsx)("p",{className:"text-fd-muted-foreground",children:i})]},e)})})]}),("authorizationCode"===g||"clientCredentials"===g||"implicit"===g)&&(0,t.jsxs)("fieldset",{className:"flex flex-col gap-1.5",children:[(0,t.jsx)("label",{htmlFor:"client_id",className:(0,s.cn)((0,l.labelVariants)()),children:"Client ID"}),(0,t.jsx)("p",{className:"text-fd-muted-foreground text-sm",children:"The client ID of your OAuth application."}),(0,t.jsx)(l.Input,{id:"client_id",placeholder:"Enter value",type:"text",autoComplete:"off",disabled:N,...y.register("clientId",{required:!0})})]}),("authorizationCode"===g||"clientCredentials"===g)&&(0,t.jsxs)("fieldset",{className:"flex flex-col gap-1.5",children:[(0,t.jsx)("label",{htmlFor:"client_secret",className:(0,s.cn)((0,l.labelVariants)()),children:"Client Secret"}),(0,t.jsx)("p",{className:"text-fd-muted-foreground text-sm",children:"The client secret of your OAuth application."}),(0,t.jsx)(l.Input,{id:"client_secret",placeholder:"Enter value",type:"password",autoComplete:"off",disabled:N,...y.register("clientSecret",{required:!0})})]}),"password"===g&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("fieldset",{className:"flex flex-col gap-1.5",children:[(0,t.jsx)("label",{htmlFor:"username",className:(0,s.cn)((0,l.labelVariants)()),children:"Username"}),(0,t.jsx)(l.Input,{id:"username",placeholder:"Enter value",type:"text",disabled:N,autoComplete:"off",...y.register("username",{required:!0})})]}),(0,t.jsxs)("fieldset",{className:"flex flex-col gap-1.5",children:[(0,t.jsx)("label",{htmlFor:"password",className:(0,s.cn)((0,l.labelVariants)()),children:"Client Secret"}),(0,t.jsx)(l.Input,{id:"password",placeholder:"Enter value",type:"password",autoComplete:"off",disabled:N,...y.register("password",{required:!0})})]})]}),_?(0,t.jsx)("p",{className:"text-red-400 font-medium text-sm",children:String(_)}):null,(0,t.jsx)("button",{type:"submit",disabled:N,className:(0,s.cn)((0,o.buttonVariants)({color:"primary"})),children:b.isLoading?"Fetching token...":"Submit"})]})]})]})}let p=a.DialogTrigger}]);