{"version":3,"sources":["turbopack:///[project]/node_modules/fumadocs-core/dist/chunk-CNWEGOUF.js","turbopack:///[project]/node_modules/fumadocs-core/dist/chunk-KAOEMCTI.js","turbopack:///[project]/node_modules/fumadocs-core/dist/orama-cloud-BYTAI6QU.js"],"sourcesContent":["// src/search/shared.ts\nfunction escapeRegExp(input) {\n  return input.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\nfunction buildRegexFromQuery(q) {\n  const trimmed = q.trim();\n  if (trimmed.length === 0) return null;\n  const terms = Array.from(\n    new Set(\n      trimmed.split(/\\s+/).map((t) => t.trim()).filter(Boolean)\n    )\n  );\n  if (terms.length === 0) return null;\n  const escaped = terms.map(escapeRegExp).join(\"|\");\n  return new RegExp(`(${escaped})`, \"gi\");\n}\nfunction createContentHighlighter(query) {\n  const regex = typeof query === \"string\" ? buildRegexFromQuery(query) : query;\n  return {\n    highlight(content) {\n      if (!regex) return [{ type: \"text\", content }];\n      const out = [];\n      let i = 0;\n      for (const match of content.matchAll(regex)) {\n        if (i < match.index) {\n          out.push({\n            type: \"text\",\n            content: content.substring(i, match.index)\n          });\n        }\n        out.push({\n          type: \"text\",\n          content: match[0],\n          styles: {\n            highlight: true\n          }\n        });\n        i = match.index + match[0].length;\n      }\n      if (i < content.length) {\n        out.push({\n          type: \"text\",\n          content: content.substring(i)\n        });\n      }\n      return out;\n    }\n  };\n}\n\nexport {\n  createContentHighlighter\n};\n","// src/utils/remove-undefined.ts\nfunction removeUndefined(value, deep = false) {\n  const obj = value;\n  for (const key of Object.keys(obj)) {\n    if (obj[key] === void 0) delete obj[key];\n    if (deep && typeof obj[key] === \"object\" && obj[key] !== null) {\n      removeUndefined(obj[key], deep);\n    } else if (deep && Array.isArray(obj[key])) {\n      obj[key].forEach((v) => removeUndefined(v, deep));\n    }\n  }\n  return value;\n}\n\nexport {\n  removeUndefined\n};\n","import {\n  removeUndefined\n} from \"./chunk-KAOEMCTI.js\";\nimport {\n  createContentHighlighter\n} from \"./chunk-CNWEGOUF.js\";\nimport \"./chunk-JSBRDJBE.js\";\n\n// src/search/client/orama-cloud.ts\nasync function searchDocs(query, options) {\n  const highlighter = createContentHighlighter(query);\n  const list = [];\n  const { index = \"default\", client, params: extraParams = {}, tag } = options;\n  if (index === \"crawler\") {\n    const result2 = await client.search({\n      ...extraParams,\n      term: query,\n      where: {\n        category: tag ? {\n          eq: tag.slice(0, 1).toUpperCase() + tag.slice(1)\n        } : void 0,\n        ...extraParams.where\n      },\n      limit: 10\n    });\n    if (!result2) return list;\n    for (const hit of result2.hits) {\n      const doc = hit.document;\n      list.push(\n        {\n          id: hit.id,\n          type: \"page\",\n          content: doc.title,\n          contentWithHighlights: highlighter.highlight(doc.title),\n          url: doc.path\n        },\n        {\n          id: \"page\" + hit.id,\n          type: \"text\",\n          content: doc.content,\n          contentWithHighlights: highlighter.highlight(doc.content),\n          url: doc.path\n        }\n      );\n    }\n    return list;\n  }\n  const params = {\n    ...extraParams,\n    term: query,\n    where: removeUndefined({\n      tag,\n      ...extraParams.where\n    }),\n    groupBy: {\n      properties: [\"page_id\"],\n      maxResult: 7,\n      ...extraParams.groupBy\n    }\n  };\n  const result = await client.search(params);\n  if (!result || !result.groups) return list;\n  for (const item of result.groups) {\n    let addedHead = false;\n    for (const hit of item.result) {\n      const doc = hit.document;\n      if (!addedHead) {\n        list.push({\n          id: doc.page_id,\n          type: \"page\",\n          content: doc.title,\n          contentWithHighlights: highlighter.highlight(doc.title),\n          url: doc.url\n        });\n        addedHead = true;\n      }\n      list.push({\n        id: doc.id,\n        content: doc.content,\n        contentWithHighlights: highlighter.highlight(doc.content),\n        type: doc.content === doc.section ? \"heading\" : \"text\",\n        url: doc.section_id ? `${doc.url}#${doc.section_id}` : doc.url\n      });\n    }\n  }\n  return list;\n}\nexport {\n  searchDocs\n};\n"],"names":[],"mappings":"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","ignoreList":[0,1,2]}