{"version":3,"sources":["turbopack:///[project]/node_modules/fumadocs-core/dist/chunk-CNWEGOUF.js","turbopack:///[project]/node_modules/fumadocs-core/dist/algolia-KPRGMSJO.js"],"sourcesContent":["// src/search/shared.ts\nfunction escapeRegExp(input) {\n  return input.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\nfunction buildRegexFromQuery(q) {\n  const trimmed = q.trim();\n  if (trimmed.length === 0) return null;\n  const terms = Array.from(\n    new Set(\n      trimmed.split(/\\s+/).map((t) => t.trim()).filter(Boolean)\n    )\n  );\n  if (terms.length === 0) return null;\n  const escaped = terms.map(escapeRegExp).join(\"|\");\n  return new RegExp(`(${escaped})`, \"gi\");\n}\nfunction createContentHighlighter(query) {\n  const regex = typeof query === \"string\" ? buildRegexFromQuery(query) : query;\n  return {\n    highlight(content) {\n      if (!regex) return [{ type: \"text\", content }];\n      const out = [];\n      let i = 0;\n      for (const match of content.matchAll(regex)) {\n        if (i < match.index) {\n          out.push({\n            type: \"text\",\n            content: content.substring(i, match.index)\n          });\n        }\n        out.push({\n          type: \"text\",\n          content: match[0],\n          styles: {\n            highlight: true\n          }\n        });\n        i = match.index + match[0].length;\n      }\n      if (i < content.length) {\n        out.push({\n          type: \"text\",\n          content: content.substring(i)\n        });\n      }\n      return out;\n    }\n  };\n}\n\nexport {\n  createContentHighlighter\n};\n","import {\n  createContentHighlighter\n} from \"./chunk-CNWEGOUF.js\";\nimport \"./chunk-JSBRDJBE.js\";\n\n// src/search/client/algolia.ts\nfunction groupResults(hits) {\n  const grouped = [];\n  const scannedUrls = /* @__PURE__ */ new Set();\n  for (const hit of hits) {\n    if (!scannedUrls.has(hit.url)) {\n      scannedUrls.add(hit.url);\n      grouped.push({\n        id: hit.url,\n        type: \"page\",\n        url: hit.url,\n        content: hit.title\n      });\n    }\n    grouped.push({\n      id: hit.objectID,\n      type: hit.content === hit.section ? \"heading\" : \"text\",\n      url: hit.section_id ? `${hit.url}#${hit.section_id}` : hit.url,\n      content: hit.content\n    });\n  }\n  return grouped;\n}\nasync function searchDocs(query, { indexName, onSearch, client, locale, tag }) {\n  if (query.trim().length === 0) return [];\n  const result = onSearch ? await onSearch(query, tag, locale) : await client.searchForHits({\n    requests: [\n      {\n        type: \"default\",\n        indexName,\n        query,\n        distinct: 5,\n        hitsPerPage: 10,\n        filters: tag ? `tag:${tag}` : void 0\n      }\n    ]\n  });\n  const highlighter = createContentHighlighter(query);\n  return groupResults(result.results[0].hits).flatMap((hit) => {\n    if (hit.type === \"page\") {\n      return {\n        ...hit,\n        contentWithHighlights: hit.contentWithHighlights ?? highlighter.highlight(hit.content)\n      };\n    }\n    return [];\n  });\n}\nexport {\n  groupResults,\n  searchDocs\n};\n"],"names":[],"mappings":"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","ignoreList":[0,1]}